// Use: No constants needed
module TokenRing

// N=4 nodes, M=5 counter values (must satisfy N <= M+1)
var c: Dict[Int, Int]

init {
    c = {i: 0 for i in 0..3}
}

invariant TypeOK {
    all k in 0..3: c[k] >= 0 and c[k] <= 4
}

action CreateToken() {
    require c[0] == c[3]
    c = c | { 0: (c[3] + 1) % 5 }
}

action PassToken(i: 1..3) {
    require c[i] != c[i - 1]
    c = c | { i: c[i - 1] }
}
